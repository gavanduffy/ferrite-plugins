name: Ferrite iOS Master Plugins
author: kingbri & User
sources:
  - name: Torrent Search Worker
    version: 1.0.0
    minVersion: '0.7.2'
    about: Search aggregator via Cloudflare Worker API.
    website: https://torrent-search-worker.euangrimshaw.workers.dev
    tags:
      - name: Aggregator
        color: 5856d6
    jsonParser:
      searchUrl: https://torrent-search-worker.euangrimshaw.workers.dev/api/search?q={query}
      results: results
      title:
        query: title
      magnetLink:
        query: magnetLink
      size:
        query: size
      sl:
        seeders: seeders
        leechers: leechers
      date:
        query: date

  - name: AnimeTosho
    version: 6
    minVersion: '0.6.4'
    about: An aggregator of public trackers for Japanese media.
    website: https://animetosho.org
    tags:
      - name: Reliable
        color: 34c759
      - name: Anime
    rssParser:
      rssUrl: https://feed.animetosho.org
      searchUrl: /api?q={query}
      items: item
      magnetHash:
        query: infohash
        discriminator: name
        attribute: value
      magnetLink:
        query: magnetUrl
        discriminator: name
        attribute: value
      title:
        query: title
      size:
        query: size
        discriminator: name
        attribute: value
      sl:
        seeders: seeders
        leechers: leechers
        discriminator: name
        attribute: value
    htmlParser:
      searchUrl: /search?q={query}
      rows: '#content .home_list_entry'
      magnet:
        query: '.links > a:nth-child(4)'
        attribute: href
      title:
        query: .link
      size:
        query: .size
      sl:
        combined: '.links > span:nth-child(5)'
        attribute: title
        seederRegex: 'Seeders:\s?(\d+)'
        leecherRegex: 'Leechers:\s?(\d+)'

  - name: Nyaa
    version: 6
    minVersion: '0.6.4'
    about: The one stop shop for your anime and Japanese media needs.
    website: https://nyaa.si
    tags:
      - name: Reliable
        color: 34c759
      - name: Anime
    trackers:
      - http://nyaa.tracker.wf:7777/announce
      - udp://open.stealth.si:80/announce
      - udp://tracker.opentrackr.org:1337/announce
      - udp://exodus.desync.com:6969/announce
      - udp://tracker.torrent.eu.org:451/announce
    rssParser:
      searchUrl: /?page=rss&q={query}
      items: item
      magnetHash:
        query: 'nyaa:infoHash'
      title:
        query: title
      size:
        query: 'nyaa:size'
      sl:
        seeders: 'nyaa:seeders'
        leechers: 'nyaa:leechers'
    htmlParser:
      searchUrl: ?q={query}
      rows: .torrent-list tbody tr
      magnet:
        query: 'td:nth-child(3) > a:nth-child(2)'
        attribute: href
      title:
        query: 'td:nth-child(2) > a:nth-last-child(1)'
      size:
        query: 'td:nth-child(4)'
      sl:
        seeders: 'td:nth-child(6)'
        leechers: 'td:nth-child(7)'

  - name: PirateBay
    version: 4
    minVersion: '0.6.4'
    about: The legendary media aggregate site. Nowadays, it's pretty unreliable.
    website: https://thepiratebay.org
    tags:
      - name: Unreliable
        color: ff3b30
      - name: Movies
      - name: TV
      - name: Anime
    fallbackUrls:
      - https://thepiratebay0.org/
      - https://thepiratebay10.org/
    api:
      apiUrl: https://apibay.org
    jsonParser:
      searchUrl: /q.php?q={query}
      magnetHash:
        query: info_hash
      title:
        query: name
      size:
        query: size
      sl:
        seeders: seeders
        leechers: leechers
    htmlParser:
      searchUrl: /search/{query}
      rows: 'table#searchResult tbody > tr'
      magnet:
        query: 'td:nth-child(2) > a'
        attribute: href
      title:
        query: 'td:nth-child(2) .detName .detLink'
      size:
        query: 'td:nth-child(2) .detDesc'
        regex: (Size.+?B)
      sl:
        seeders: 'td:nth-child(3)'
        leechers: 'td:nth-child(4)'

  - name: YTS
    version: 3
    minVersion: '0.6.4'
    about: Has pretty much every movie out there.
    website: https://yts.mx
    tags:
      - name: Reliable
        color: 34c759
      - name: Movies
    jsonParser:
      searchUrl: /api/v2/list_movies.json?query_term={query}
      results: data.movies
      subResults: torrents
      magnetHash:
        query: hash
      title:
        query: title_long
        discriminator: quality
      size:
        query: size
      sl:
        seeders: seeds
        leechers: peers

  - name: SolidTorrents
    version: 1
    minVersion: '0.6.4'
    about: Comprehensive torrent search via SolidTorrents API.
    website: https://solidtorrents.to
    tags:
      - name: Reliable
        color: 34c759
      - name: General
    jsonParser:
      searchUrl: /api/v1/search?q={query}&limit=100&sort=seeders
      results: results
      magnetHash:
        query: infohash
      title:
        query: title
      size:
        query: size
      sl:
        seeders: seeders
        leechers: leechers

  - name: Torrents CSV
    version: 1
    minVersion: '0.6.4'
    about: Fast torrent search via torrents-csv.com.
    website: https://torrents-csv.com
    tags:
      - name: Fast
        color: 34c759
      - name: General
    jsonParser:
      searchUrl: /service/search?q={query}
      results: torrents
      magnetHash:
        query: infohash
      title:
        query: name
      size:
        query: size_bytes
      sl:
        seeders: seeders
        leechers: leechers

  - name: Knaben
    version: 1
    minVersion: '0.6.4'
    about: Knaben torrent search via HTML parsing.
    website: https://knaben.net
    tags:
      - name: General
    htmlParser:
      searchUrl: /search/{query}
      rows: 'table.table-striped tbody tr'
      magnet:
        query: "a[href^='magnet']"
        attribute: href
      title:
        query: .title a
      size:
        query: 'td:nth-child(3)'
      sl:
        seeders: 'td:nth-child(4)'
        leechers: 'td:nth-child(5)'

  - name: 1337x
    version: 2
    minVersion: '0.7.2'
    about: Parser for 1337x.to. Large aggregate site for media.
    website: https://1337x.to
    tags:
      - name: Slow
        color: ff9500
      - name: Movies
    htmlParser:
      searchUrl: /search/{query}/{page}/
      rows: .table-list tbody tr
      magnet:
        externalLinkQuery: '.name a:nth-last-child(1)'
        query: 'a[href^="magnet:"]'
        attribute: href
      title:
        query: '.name > a:nth-last-child(1)'
      size:
        query: .size
        regex: (.+?B)
      sl:
        seeders: .seeds
        leechers: .leeches

  - name: BitSearch
    version: 4
    minVersion: '0.6.4'
    about: Scraper and indexer for large sites such as RARBG.
    website: https://bitsearch.to
    tags:
      - name: Dead
        color: ff3b30
    htmlParser:
      searchUrl: /search?q={query}
      rows: '.search-result:has(a.dl-torrent)'
      magnet:
        query: '.links > .dl-magnet'
        attribute: href
      title:
        query: '.info > div > .title'
      size:
        query: '.info > div > div > div > div:nth-child(2)'
      sl:
        seeders: '.info > div > div > div > div:nth-child(3) > font'
        leechers: '.info > div > div > div > div:nth-child(4) > font'

  - name: fitgirl
    version: 2
    minVersion: '0.7.2'
    about: Highly compressed game repacks.
    website: https://fitgirl-repacks.site
    tags:
      - name: Reliable
        color: 34c759
      - name: Games
    htmlParser:
      searchUrl: https://fitgirl-repacks.site/page/{page}/?s={query}
      rows: article.post
      magnet:
        externalLinkQuery: .entry-title a
        query: 'a[href^="magnet:"]'
        attribute: href
      title:
        query: .entry-title a

actions:
  - name: Open in Outplayer
    version: 3
    minVersion: '0.6.4'
    about: Uses libmpv as a backend. Supports PIP with MKV files.
    website: https://apps.apple.com/us/app/outplayer/id1449923287
    requires:
      - debrid
    deeplink:
      - os: iOS
        scheme: 'outplayer://{link}'
  - name: Open in VLC
    version: 3
    minVersion: '0.6.4'
    about: An opensource video player that runs pretty much anywhere.
    website: https://www.videolan.org/vlc/
    requires:
      - debrid
    deeplink:
      - os: iOS
        scheme: 'vlc-x-callback://x-callback-url/stream?url=${link}'
      - scheme: 'vlc://${link}'
  - name: Open in Infuse
    version: 3
    minVersion: '0.6.4'
    about: Player full of support for various media servers and formats.
    website: https://firecore.com/infuse
    requires:
      - debrid
    deeplink:
      - os: iOS
        scheme: 'infuse://x-callback-url/play?url={link}'
  - name: Open in iTorrent
    version: 3
    minVersion: '0.6.4'
    website: https://github.com/XITRIX/iTorrent
    requires:
      - magnet
    deeplink:
      - os: iOS
        scheme: '{link}'
